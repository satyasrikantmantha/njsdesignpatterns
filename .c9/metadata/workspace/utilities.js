{"filter":false,"title":"utilities.js","tooltip":"/utilities.js","undoManager":{"mark":1,"position":1,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":2,"column":27},"action":"remove","lines":["var urlParse = require('url').parse;","var slug = require('slug');","var path = require('path');"]},{"start":{"row":0,"column":0},"end":{"row":5,"column":33},"action":"insert","lines":["var urlParse = require('url').parse;","var urlFormat = require('url').format;","var urlResolve = require('url').resolve;","var slug = require('slug');","var path = require('path');","var cheerio = require('cheerio');"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":0},"end":{"row":23,"column":0},"action":"remove","lines":["module.exports.urlToFilename = function urlToFilename(url) {","  var parsedUrl = urlParse(url);","  var urlPath = parsedUrl.path.split('/')","    .filter(function(component) {","      return component !== '';","    })","    .map(function(component) {","      return slug(component);","    })","    .join('/');","  var filename = path.join(parsedUrl.hostname, urlPath);","  if(!path.extname(filename).match(/htm/)) {","    filename += '.html';","  }","  return filename;","}",""]},{"start":{"row":7,"column":0},"end":{"row":47,"column":0},"action":"insert","lines":["module.exports.urlToFilename = function urlToFilename(url) {","  var parsedUrl = urlParse(url);","  var urlPath = parsedUrl.path.split('/')","    .filter(function(component) {","      return !!component;","    })","    .map(function(component) {","      return slug(component);","    })","    .join('/');","  var filename = path.join(parsedUrl.hostname, urlPath);","  if(!path.extname(filename).match(/htm/)) {","    filename += '.html';","  }","  return filename;","}","","","module.exports.getLinkUrl = function getLinkUrl(currentUrl, element) {","  var link = urlResolve(currentUrl, element.attribs.href || \"\");","  var parsedLink = urlParse(link);","  var currentParsedUrl = urlParse(currentUrl);","  if(parsedLink.hostname !== currentParsedUrl.hostname","    || !parsedLink.pathname) {","      return null;","  }","  return link;","}","","","module.exports.getPageLinks = function getPageLinks(currentUrl, body) {","  return [].slice.call(cheerio.load(body)('a'))","    .map(function(element) {","      return module.exports.getLinkUrl(currentUrl, element);","    })","    .filter(function(element) {","      return !!element;","    });","}","",""]}]}]]},"ace":{"folds":[],"scrolltop":29,"scrollleft":0,"selection":{"start":{"row":21,"column":18},"end":{"row":21,"column":18},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1426660271491,"hash":"f294279e88e283d962a6d98d99257a0cdf141fa3"}